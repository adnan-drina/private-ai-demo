---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: guidellm
  annotations:
    config.kubernetes.io/local-config: "true"

# GuideLLM Integration
# Using official container image: ghcr.io/vllm-project/guidellm:latest
# Reference: https://github.com/vllm-project/guidellm

namespace: private-ai-demo

resources:
  # RBAC
  - rbac-guidellm.yaml
  
  # Configuration
  - configmap-guidellm-benchmark.yaml
  - configmap-guidellm-profiles.yaml
  - secret-s3-credentials.yaml
  
  # Jobs (manual benchmarks)
  - job-guidellm-mistral-quantized.yaml
  - job-guidellm-mistral-full.yaml
  
  # CronJobs (scheduled benchmarks)
  - cronjob-guidellm-daily.yaml
  - cronjob-guidellm-weekly.yaml
  
  # Interactive workbench UI
  - deployment-guidellm-workbench.yaml
  - service-guidellm-workbench.yaml
  - route-guidellm-workbench.yaml

configMapGenerator:
  - name: guidellm-workbench-app
    files:
      - app.py=workbench-app.py
    options:
      disableNameSuffixHash: true

labels:
  - includeSelectors: false
    pairs:
      app.kubernetes.io/part-of: evaluation
      app.kubernetes.io/component: benchmarking
      managed-by: argocd
