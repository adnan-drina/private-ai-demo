---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Common labels applied to all resources
# Note: includeSelectors=false to avoid modifying immutable Deployment selectors
# Labels are still applied to metadata and pod templates, just not to selectors
labels:
  - includeSelectors: false
    pairs:
      app.kubernetes.io/part-of: private-ai-demo
      stage: "03"
      managed-by: argocd

# Resources in deployment order
resources:
  # Operators and prerequisites
  - operators

  # 1. TrustyAI Operator (LMEvalJobs)
  - trustyai
  
  # 2. Observability (Grafana, Prometheus)
  - observability

  # 3. GuideLLM Benchmarking
  - guidellm

  # 4. Dashboard configuration (enable LM Eval menu)
  - dashboard
  
  # 5. Evaluation results notebooks
  - notebooks

# Configuration for all resources
configurations:
  - kustomizeconfig.yaml

