---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: private-ai-demo

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/part-of: private-ai-demo
  stage: "01"
  managed-by: argocd

# Resources in deployment order
# Note: Commented resources remain available in Git but are not deployed.
# To deploy them, uncomment the line or create a separate ArgoCD Application.
resources:
  # Core infrastructure (always deployed)
  - project-namespace           # Wave 0: Namespace
  - mysql                       # Wave 0-2: MySQL database for Model Registry
  - model-registry-instance     # Wave 3-4: ModelRegistry CR and RBAC
  - imagestreams                # Wave 1: ImageStreams for ModelCar images
  - workspaces                  # Wave 1: PVCs for pipeline workspace
  - model-registry              # Wave 1: Model Registry configuration
  - pipelines                   # Wave 2: Tekton pipelines and tasks

# Optional components (deploy via separate ArgoCD apps or uncomment when needed)
# Recommendation: Create separate ArgoCD Applications for these components
# to enable/disable independently without risking deletion of core resources.
#
# - minio              # Object storage for models and artifacts
# - vllm               # InferenceServices and ServingRuntimes
# - benchmarking       # Benchmark jobs and results storage
# - workbench          # Jupyter notebooks for testing

# Configuration for all resources
configurations:
  - kustomizeconfig.yaml

