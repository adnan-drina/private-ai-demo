---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Model Serving Application
# Deployed in: private-ai-demo namespace
# Purpose: MLOps pipeline, model serving, workbench

namespace: private-ai-demo

# Common labels for all application resources
commonLabels:
  app.kubernetes.io/part-of: private-ai-demo
  stage: "01"
  managed-by: argocd

# Resources in deployment order
resources:
  # Wave 0: Namespace infrastructure
  - ../project-namespace
  
  # Wave 1: Infrastructure
  - ../network-policy              # NetworkPolicy for Model Registry access
  - ../imagestreams                # ImageStreams for ModelCar images
  - ../workspaces                  # PVCs for pipeline workspace
  - ../model-registry              # Model Registry ConfigMap (used by pipelines)
  
  # Wave 2: MLOps Pipeline
  - ../pipelines                   # Tekton pipelines and tasks
  
  # Wave 3: Model Serving
  - ../vllm                        # InferenceServices and ServingRuntimes
  
  # Wave 4: Development Tools
  - ../model-serving-testing       # Interactive notebooks for testing

# Optional components (commented out)
#
# - ../model-loader                # Download models from HuggingFace (use ModelCar pipeline instead)

# Note: kustomizeconfig.yaml not needed here as we're not using transformers
