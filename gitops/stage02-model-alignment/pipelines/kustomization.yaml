apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: docling-pipeline

resources:
  # PVC for documents
  - pvc-rag-documents.yaml
  
  # Tekton tasks - Essential tasks for all scenarios
  - task-prepare-documents.yaml
  - task-extract-metadata.yaml
  - task-chunk-documents.yaml
  
  # Docling processing tasks
  - task-docling-process.yaml
  - task-docling-process-simple.yaml
  - task-docling-process-pure-async.yaml
  - task-docling-process-async.yaml
  - task-docling-process-acme.yaml
  
  # Milvus ingestion tasks
  - task-ingest-to-milvus.yaml
  - task-ingest-to-milvus-production.yaml
  - task-ingest-acme-to-milvus.yaml
  - task-verify-ingestion.yaml
  
  # ACME-specific tasks
  - task-chunk-acme-documents.yaml
  - task-extract-acme-metadata.yaml
  
  # Pipeline definitions - All 4 scenarios
  - pipeline-rag-ingestion-simple.yaml
  - pipeline-rag-ingestion.yaml
  - pipeline-redhat-ingestion.yaml
  - pipeline-acme-ingestion.yaml
  
  # PipelineRun examples - Can be triggered manually after documents are uploaded
  # Note: Uncomment these to auto-deploy, but documents must exist first
  # - pipelinerun-eu-ai-act-simple.yaml
  # - pipelinerun-eu-ai-act.yaml

labels:
  - includeSelectors: true
    pairs:
      app.kubernetes.io/component: docling-pipeline
      app.kubernetes.io/part-of: llama-stack


