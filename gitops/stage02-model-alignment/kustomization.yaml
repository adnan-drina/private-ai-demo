---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: private-ai-demo

# Common labels applied to all resources
# Note: includeSelectors=false to avoid modifying immutable Deployment selectors
# Labels are still applied to metadata and pod templates, just not to selectors
labels:
  - includeSelectors: false
    pairs:
      app.kubernetes.io/part-of: private-ai-demo
      stage: "02"
      managed-by: argocd

# Resources in deployment order
resources:
  # 1. Llama Stack distribution
  - llama-stack
  
  # 2. Guardrails orchestrator
  - guardrails
  
  # 3. Milvus vector database
  - milvus
  
  # 4. Docling operator (for PDF processing)
  - docling
  
  # 5. Kubeflow Pipelines (DSPA)
  - kfp
  

# Configuration for all resources
configurations:
  - kustomizeconfig.yaml

