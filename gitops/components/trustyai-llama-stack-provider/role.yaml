---
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: trustyai-provider
  namespace: private-ai-demo
  labels:
    app.kubernetes.io/name: trustyai-provider
    app.kubernetes.io/component: evaluation
    app.kubernetes.io/part-of: llama-stack
  annotations:
    description: "RBAC permissions for TrustyAI provider to manage LMEvalJobs"
rules:
# LMEvalJob management - Full CRUD
- apiGroups: ["trustyai.opendatahub.io"]
  resources: ["lmevaljobs"]
  verbs: ["get", "list", "watch", "create", "delete", "patch", "update"]

# LMEvalJob status - Read-only to monitor progress
- apiGroups: ["trustyai.opendatahub.io"]
  resources: ["lmevaljobs/status"]
  verbs: ["get", "list", "watch"]

# ConfigMaps and Secrets - Read-only for configuration
- apiGroups: [""]
  resources: ["configmaps"]
  verbs: ["get", "list"]

- apiGroups: [""]
  resources: ["secrets"]
  verbs: ["get"]

# Pods and logs - Read-only for debugging and monitoring
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get", "list", "watch"]

- apiGroups: [""]
  resources: ["pods/log"]
  verbs: ["get", "list"]

# Events - Read-only for troubleshooting
- apiGroups: [""]
  resources: ["events"]
  verbs: ["get", "list", "watch"]

